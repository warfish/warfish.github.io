---
author: wrfsh
comments: true
date: 2013-10-02 04:15:51+00:00
layout: post
slug: doom-uefi-edk-vs-gnuefi
title: '[DOOM-UEFI] EDK vs gnuefi'
wordpress_id: 237
categories:
- doom-uefi
---


	
  * Все платформенно-специфические зависимости были любезно вынесены id в файлы с перфиксами i_. Все файлы вынесены в [https://github.com/warfish/DOOM/tree/master/linuxdoom-1.10/efi](https://github.com/warfish/DOOM/tree/master/linuxdoom-1.10/efi). Реализации пока нет - одни стабы.

	
  * Проект собирается и линкуется для EDK.


Я работаю на маке, пришлось собирать кросс-компилятор для EDK. Пока он собирался у меня был лишний час подумать о том, насколько мне вообще нужен EDK с его громоздкой билд системой, кодогенерацией и необходимыми вывертами чтобы собираться вне EDK дерева.

Вспомнил про проект [gnuefi](http://sourceforge.net/projects/gnu-efi/), на который я последний раз смотрел года 2 назад. Проект, по сравнению с EDK, крайне простой, плоский: гора хедеров с протоколами из спецификации, гора сишников с реализацией всякого полезного добра поверх спецификации и горстка ассемблерного кода с точками входа для разных архитектур. Все это собирается под нужную архитектуру и получаются теже хедера, одна статическая либа с расширениями и пара объектников, с которыми нужно слинковаться клиентскому бинарнику чтобы EFI смог запустить бинарь. Нет libc, ну и ладно. Лицензия lgpl3, что совместимо с открытыми сурсами дума.

Такой подход по сравнению с EDK как глоток свежего воздуха: просто, тупо и понятно. Жаль что работает только на линуксе. На маке удалось собрать попинав, на винде наверное только через цигвин.

Пока я все равно останусь на EDK, потому что я хотябы знаю что с ним делать. Но в будущем хочется уйти от него.



Полезные ссылки:

[http://smackerelofopinion.blogspot.ru/2011/05/gnu-efi-lib-and-hello-world.html](http://smackerelofopinion.blogspot.ru/2011/05/gnu-efi-lib-and-hello-world.html)

[http://sourceforge.net/projects/gnu-efi/](http://sourceforge.net/projects/gnu-efi/)

[http://www.rodsbooks.com/efi-programming/prepare.html](http://www.rodsbooks.com/efi-programming/prepare.html)



P.S. В этом блоге больше не должно быть рекламы.
